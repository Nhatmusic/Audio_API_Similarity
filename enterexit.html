<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>JS Bin</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
</head>
<body>
<svg></svg>
<script>
    const svg = d3.select("svg");
    svg.attr('width', 200).attr("height", 200);
    const g = svg.append("g").attr("transform", "translate(10, 10)");

    const data  = [
        {x: 10, y: 10, r: 10, color: 'red',id: '0' },
        {x: 100, y: 10, r: 5, color: 'green', id: '1' },
        {x: 100, y: 100, r: 2, color: 'blue', id: '2' }
    ];
    const data2 = [
        {x: 100, y: 10, r: 5, color: 'green', id: '1' },
        {x: 100, y: 100, r: 2, color: 'blue', id: '2' }
    ];
    const data3 = [
        {x: 100, y: 10, r: 5, color: 'green', id: '1' },
        {x: 100, y: 100, r: 2, color: 'blue', id: '2' },
        {x: 100, y: 150, r: 10, color: 'steelblue', id: '3' }
    ]

    function create(data){
        const circles = g.selectAll("circle").data(data, function(d){return d.id;});
        const enters = circles.enter().append("circle").call(setCircleAttributes);
        circles.exit().attr('opacity', 1.0).transition().duration(1000).attr('opacity', 0).remove();
        circles.transition().duration(1000).call(setCircleAttributes);
    }
    function setCircleAttributes(theCircles){
        theCircles.attr("cx", d=>d.x).attr("cy", d=>d.y).attr("r", d=>d.r).attr("fill", d=>d.color);
    }
    //create(data);
    create(data2);
    create(data3);
</script>
</body>
</html>